행사가 등록되었습니다');
                renderEventList();
                
            } catch (error) {
                console.error('저장 오류:', error);
                showToast('저장 중 오류가 발생했습니다');
            }
        }
        
        // 행사 삭제
        async function deleteEvent(id) {
            if (!confirm('이 행사를 삭제하시겠습니까?')) return;
            
            yearlyEvents = yearlyEvents.filter(function(e) { return e.id !== id; });
            
            try {
                await db.collection('yearlyEvents').doc('main').set({ list: yearlyEvents });
                localStorage.setItem('yearlyEvents', JSON.stringify(yearlyEvents));
                
                showToast('행사가 삭제되었습니다');
                renderEventList();
                
            } catch (error) {
                console.error('삭제 오류:', error);
                showToast('삭제 중 오류가 발생했습니다');
            }
        }
        
        function showToast(msg) {
            var toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(function() { toast.classList.remove('show'); }, 2500);
        }
        
        window.addEventListener('online', function() { document.body.classList.remove('offline'); loadData(); });
        window.addEventListener('offline', function() { document.body.classList.add('offline'); showToast('오프라인 모드입니다'); });
    </script>
</body>
</html>
